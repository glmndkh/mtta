Зорилго

Шигшээ жагсаалтад яг 16 өөр тоглогч байх.

Давхардал, хоосон мөр, буруу seed-үүдийг валидацлах.

16 баталгаажмагц single-elimination bracket үүсгэх.

Ялагчийг сонгох бүрт дараагийн тойрогт автоматаар дамжуулах.

Жагсаалт өөрчлөгдвөл bracket-ээ “хуучирсан” гэж тэмдэглээд дахин үүсгэхийг санал болгох.

Өгөгдлийн зарчим

Тоглогч бүр өвөрмөц ID-тай (нэр давхцаж болно, ID давхцах ёсгүй).

(Хэрэв ашиглавал) seed нь 1–16 хооронд, давхцахгүй.

Жагсаалт (доод хэсэг) нь ганц эх сурвалж. Bracket дандаа үүнээс үүснэ.

Валидацийн дараалал (Generate дарахаас өмнө)

Хоосон мөрийг устгах (нэр/ID байхгүй мөр).

Давхардал шалгах

Адил ID илэрвэл “Давхардсан тоглогч” гэсэн анхааруулга өгөөд Generate-ийг идэвхгүй болго.

Тоо шалгах

16 биш бол “16 тоглогч хэрэгтэй” гэсэн мессеж, Generate идэвхгүй.

Seed шалгах (хэрэв хэрэглэж байвал)

1–16-гийн хүрээнээс гараагүй, давхцаагүй байх.

OK бол Generate идэвхтэй.

Хослуулах (seeding) зарчим

Seed байгаа тохиолдолд классик хослол:

(1 vs 16), (8 vs 9), (5 vs 12), (4 vs 13),

(3 vs 14), (6 vs 11), (7 vs 10), (2 vs 15).

Seed үгүй бол тогтвортой randomize (жишээ нь нэр эсвэл ID-гаар холих) хийгээд дээрх загвараар байршуул.

Bracket үүсгэх алхам

Валидацлагдсан 16 тоглогчийг дээрх дарааллаар Round of 16-д байрлуулах (8 матч).

Дараагийн тойргуудыг (QF=4, SF=2, Final=1) хоосон байрлал хэлбэрээр бэлдэж хадгалах.

Дээд талын bracket-д placeholder текст байх ёсгүй — шууд тоглогчдын нэр/seed харагдана.

Ялагч дамжуулах логик

Тухайн матчид ялагч сонгогмогц:

Тэр матчын winner-ийг тогтооно.

Ялагчийг дараагийн тойргийн тохирох слот руу шилжүүлнэ.

Жишээ: R16-ын 1-р матчийн ялагч → QF-ын 1-р матчийн A слот.

Дараагийн тойргийн бүх слот бөглөгдөх хүртэл хоосон хэвээр байж болно.

Final-ын ялагч тодорвол “Аварга” статус харуулах.

Статус ба синк

Доод жагсаалт өөрчлөгдвөл bracket-ийг Dirty гэж тэмдэглэж баннер:
“Тоглогчдын жагсаалт өөрчлөгдсөн. Шинээр үүсгэх үү?”

“Re-generate” дарвал дээрх валидаци → шинэ bracket.

UI мессежүүд (жишээ)

Давхардал: “⚠️ Давхардсан тоглогч: Г.Батмөнх (ID: …)”

Тоо дутуу/илүү: “16 тоглогч бүрдүүлж байж bracket үүснэ (одоо: 13).”

Seed алдаа: “Seed 1–16 хооронд, давхцахгүй байх ёстой.”

Амжилт: “✅ Bracket амжилттай үүсгэлээ.”

Ирмэг тохиолдлууд

Нэр давхцах: Зөвшөөрнө (ID-гоор ялгана).

Ижил ID-тай өөр нэр: Алдаа (давхардсан тоглогч).

Тоглогч устгах: 16-гаас доош бол bracket-ийг Dirty болгож, тоглолт сонгохыг хаах.

Seed хэсэгчлэн өгөгдсөн: Бүрэн биш бол seed-ийг үл тооцож randomize + классик хослол руу шилж.

Шалгах чеклист

16-аас цөөн үед Generate идэвхгүй юу? ✅

Давхардал дээр тод анхааруулга, Generate хаалттай юу? ✅

Generate дарахад placeholder үлдэхгүй, бүх нэр гарч байна уу? ✅

Ялагч сонгоход дараагийн тойрогт шууд шилжиж байна уу? ✅

Жагсаалтыг өөрчлөхөд Dirty баннер гарч дахин үүсгэхийг санал болгож байна уу? ✅